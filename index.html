<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="icon" type="image/x-icon" href="https://cdn-icons-png.flaticon.com/512/9181/9181505.png">
    <title>G·ª≠i Ng·ªçc B√© B·ªèng üéÑ</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&family=Dancing+Script:wght@700&display=swap"
        rel="stylesheet">

    <style>
        /* --- BASE STYLES --- */
        body {
            font-family: 'Quicksand', sans-serif;
            overflow-x: hidden;
            background-color: #e0f2fe;
            /* Fallback color */
            /* Custom Cursor */
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="%231570EF" stroke="%23ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></svg>') 12 12, auto;
        }

        h1,
        h2,
        .font-hand {
            font-family: 'Dancing Script', cursive;
        }

        html {
            scroll-behavior: smooth;
        }

        /* Hide scrollbar for cleaner look */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: #1570EF;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #0e4f9e;
        }

        /* --- ANIMATIONS --- */
        @keyframes fall {
            0% {
                transform: translateY(-10vh) translateX(-10px) rotate(0deg);
                opacity: 1;
            }

            100% {
                transform: translateY(105vh) translateX(10px) rotate(360deg);
                opacity: 0.3;
            }
        }

        @keyframes float-around {

            0%,
            100% {
                transform: translateY(0) translateX(0) rotate(0deg);
            }

            25% {
                transform: translateY(-10px) translateX(5px) rotate(10deg);
            }

            50% {
                transform: translateY(0) translateX(10px) rotate(0deg);
            }

            75% {
                transform: translateY(10px) translateX(5px) rotate(-10deg);
            }
        }

        @keyframes slide-up {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-slide-up {
            animation: slide-up 0.8s ease-out forwards;
        }

        /* Scroll Reveal Class */
        .reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: all 1s ease-out;
        }

        .reveal.active {
            opacity: 1;
            transform: translateY(0);
        }

        @keyframes spin-slow {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        @keyframes wiggle {

            0%,
            100% {
                transform: rotate(-5deg);
            }

            50% {
                transform: rotate(5deg);
            }
        }

        @keyframes glow-pulse {

            0%,
            100% {
                box-shadow: 0 0 20px rgba(21, 112, 239, 0.3);
                transform: scale(1);
            }

            50% {
                box-shadow: 0 0 50px rgba(21, 112, 239, 0.6);
                transform: scale(1.02);
            }
        }

        @keyframes swing {
            0% {
                transform: rotate(3deg);
            }

            50% {
                transform: rotate(-3deg);
            }

            100% {
                transform: rotate(3deg);
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        @keyframes open-envelope {
            0% {
                opacity: 0;
                transform: scale(0.5) translateY(100px) rotateX(45deg);
            }

            60% {
                transform: scale(1.05) translateY(-10px) rotateX(0deg);
            }

            100% {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        @keyframes explode {
            0% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(0);
            }

            100% {
                opacity: 0;
                transform: translate(calc(-50% + var(--x-move)), calc(-50% + var(--y-move))) scale(1);
            }
        }

        @keyframes beat {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.3);
            }
        }

        @keyframes shake-hard {
            0% {
                transform: translate(1px, 1px) rotate(0deg);
            }

            10% {
                transform: translate(-1px, -2px) rotate(-1deg);
            }

            20% {
                transform: translate(-3px, 0px) rotate(1deg);
            }

            30% {
                transform: translate(3px, 2px) rotate(0deg);
            }

            40% {
                transform: translate(1px, -1px) rotate(1deg);
            }

            50% {
                transform: translate(-1px, 2px) rotate(-1deg);
            }

            60% {
                transform: translate(-3px, 1px) rotate(0deg);
            }

            70% {
                transform: translate(3px, 1px) rotate(-1deg);
            }

            80% {
                transform: translate(-1px, -1px) rotate(1deg);
            }

            90% {
                transform: translate(1px, 2px) rotate(0deg);
            }

            100% {
                transform: translate(1px, -2px) rotate(-1deg);
            }
        }

        @keyframes shiver {
            0% {
                transform: rotate(0deg);
            }

            25% {
                transform: rotate(3deg);
            }

            50% {
                transform: rotate(0deg);
            }

            75% {
                transform: rotate(-3deg);
            }

            100% {
                transform: rotate(0deg);
            }
        }

        @keyframes zoom-explode {
            0% {
                transform: scale(1);
                opacity: 1;
            }

            40% {
                transform: scale(1.5);
                opacity: 1;
            }

            100% {
                transform: scale(20);
                opacity: 0;
            }
        }

        @keyframes burst-particle {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 1;
            }

            100% {
                transform: translate(calc(-50% + var(--tx)), calc(-50% + var(--ty))) scale(1);
                opacity: 0;
            }
        }

        /* Utility Classes */
        .animate-fade-in-up {
            animation: slide-up 1s ease-out forwards;
        }

        .animate-open-envelope {
            animation: open-envelope 1s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }

        .animate-float {
            animation: float 4s ease-in-out infinite;
        }

        .animate-float-around {
            animation: float-around 8s ease-in-out infinite;
        }

        .animate-wiggle {
            animation: wiggle 2s ease-in-out infinite;
        }

        .animate-spin-slow {
            animation: spin-slow 20s linear infinite;
        }

        .animate-glow-pulse {
            animation: glow-pulse 3s infinite;
        }

        .animate-swing {
            animation: swing 3s ease-in-out infinite;
            transform-origin: top center;
        }

        .animate-beat {
            animation: beat 1s infinite;
        }

        .animate-shake-hard {
            animation: shake-hard 0.5s ease-in-out infinite;
        }

        .animate-zoom-explode {
            animation: zoom-explode 0.8s cubic-bezier(0.7, 0, 0.84, 0) forwards;
        }

        .delay-300 {
            animation-delay: 300ms;
        }

        .delay-500 {
            animation-delay: 500ms;
        }

        .delay-700 {
            animation-delay: 700ms;
        }

        .delay-1000 {
            animation-delay: 1000ms;
        }

        .perspective-1000 {
            perspective: 1000px;
        }

        .tilt-card {
            transition: transform 0.1s ease-out;
            transform-style: preserve-3d;
        }

        .tilt-content {
            transform: translateZ(30px);
        }

        .click-heart {
            position: fixed;
            pointer-events: none;
            animation: slide-up 0.8s ease-out forwards;
            color: #ef4444;
            z-index: 9999;
            opacity: 0;
        }

        .burst-particle {
            position: fixed;
            top: 50%;
            left: 50%;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            animation: burst-particle 1s ease-out forwards;
        }

        /* Patterns & Backgrounds */
        .stripes {
            background-image: repeating-linear-gradient(45deg, #ef4444 0, #ef4444 20px, #fff 20px, #fff 40px, #16a34a 40px, #16a34a 60px, #fff 60px, #fff 80px);
        }

        .bg-pattern-snow {
            background-image: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23ffffff' fill-opacity='0.2' fill-rule='evenodd'%3E%3Ccircle cx='3' cy='3' r='3'/%3E%3Ccircle cx='13' cy='13' r='3'/%3E%3C/g%3E%3C/svg%3E");
        }

        .glass-blue {
            background: rgba(255, 255, 255, 0.75);
            backdrop-filter: blur(16px);
            border: 2px solid rgba(255, 255, 255, 0.9);
            box-shadow: 0 15px 40px 0 rgba(21, 112, 239, 0.15);
        }

        /* Custom Colors */
        .text-brand {
            color: #1570EF !important;
        }

        .bg-brand {
            background-color: #1570EF;
        }

        .border-brand {
            border-color: #1570EF;
        }

        /* Hover Effects Specific */
        @media (min-width: 768px) {
            .group:hover .hover-expand-1 {
                transform: translate(-30px, -30px) rotate(-12deg) scale(1.1);
            }

            .group:hover .hover-expand-2 {
                transform: translate(30px, -30px) rotate(12deg) scale(1.1);
            }

            .group:hover .hover-expand-3 {
                transform: translate(-30px, 30px) rotate(-6deg) scale(1.1);
            }

            .group:hover .hover-expand-4 {
                transform: translate(30px, 30px) rotate(6deg) scale(1.1);
            }

            .group:hover .gift-shiver {
                animation: shiver 0.4s ease-in-out infinite;
            }

            .group:hover .gift-glow {
                box-shadow: 0 0 80px rgba(21, 112, 239, 0.7);
                border-color: #1570EF;
            }
        }

        /* Preloader */
        #preloader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #e0f2fe;
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            transition: opacity 0.5s ease-out, visibility 0.5s;
        }
    </style>
</head>

<body class="bg-sky-50 text-slate-800 selection:bg-brand selection:text-white overflow-x-hidden">

    <!-- PRELOADER -->
    <div id="preloader">
        <div class="relative">
            <i data-lucide="gift" class="w-16 h-16 text-brand animate-bounce"></i>
            <div class="absolute -top-2 -right-2"><i data-lucide="heart" class="w-6 h-6 text-red-500 animate-beat"></i>
            </div>
        </div>
        <p class="mt-4 font-hand text-xl text-brand font-bold animate-pulse">ƒêang g√≥i qu√† cho Ng·ªçc...</p>
    </div>

    <!-- 1. RICH BACKGROUND -->
    <div class="fixed inset-0 bg-gradient-to-br from-sky-100 via-[#e0f2fe] to-[#dbeafe] z-0"></div>
    <div class="fixed inset-0 bg-pattern-snow pointer-events-none z-0 opacity-60"></div>
    <div id="snow-container" class="fixed inset-0 pointer-events-none z-0"></div>
    <audio id="bg-music" src="https://foldr.space/d/All%20I%20Want%20For%20Christmas%20Is%20You.mp3" loop></audio>

    <!-- ===================== VIEW 1: INTRO SCREEN ===================== -->
    <div id="intro-screen"
        class="min-h-screen flex flex-col items-center justify-center relative z-50 font-sans text-center px-4 transition-all duration-700 overflow-hidden">

        <!-- Background Aura -->
        <div
            class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] md:w-[700px] h-[500px] md:h-[700px] bg-gradient-to-tr from-blue-400 via-purple-300 to-sky-200 rounded-full blur-[80px] md:blur-[120px] opacity-40 animate-pulse">
        </div>

        <!-- Rotating Magic Circle (Scaled for mobile) -->
        <div
            class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[350px] md:w-[500px] h-[350px] md:h-[500px] border-2 border-dashed border-white/50 rounded-full animate-spin-slow pointer-events-none opacity-30">
        </div>
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[250px] md:w-[350px] h-[250px] md:h-[350px] border border-white/40 rounded-full animate-spin-slow pointer-events-none opacity-40"
            style="animation-direction: reverse;"></div>

        <!-- Floating Elements -->
        <div class="absolute top-1/4 left-10 animate-float hidden md:block"><i data-lucide="sparkles"
                class="w-10 h-10 text-yellow-400"></i></div>
        <div class="absolute bottom-1/3 right-10 animate-float hidden md:block" style="animation-delay: 1s;"><i
                data-lucide="snowflake" class="w-12 h-12 text-white"></i></div>

        <div class="relative z-10 w-full max-w-md mx-auto" id="intro-content">
            <!-- CLICK AREA -->
            <div id="start-btn"
                class="cursor-pointer group relative inline-block mb-8 md:mb-12 transform transition-transform duration-300 active:scale-95">

                <!-- Background Blur for Box -->
                <div
                    class="absolute inset-0 bg-[#1570EF] rounded-[2rem] md:rounded-[3rem] blur opacity-30 group-hover:opacity-50 transition duration-300 animate-pulse">
                </div>

                <!-- Floating Decorations (Adjusted positions for mobile) -->
                <div class="absolute -top-8 -left-8 md:-top-16 md:-left-16 animate-float-around transition-transform duration-500 hover-expand-1 z-20"
                    style="animation-delay: 0s;">
                    <div class="glass-blue p-2 md:p-3 rounded-full"><i data-lucide="tree-pine"
                            class="w-6 h-6 md:w-8 md:h-8 text-green-600 fill-green-100"></i></div>
                </div>
                <div class="absolute -top-6 -right-8 md:-top-12 md:-right-16 animate-float-around transition-transform duration-500 hover-expand-2 z-20"
                    style="animation-delay: 1.5s;">
                    <div class="glass-blue p-2 md:p-3 rounded-full"><i data-lucide="heart"
                            class="w-6 h-6 md:w-8 md:h-8 text-red-500 fill-red-500"></i></div>
                </div>
                <div class="absolute -bottom-6 -left-6 md:-bottom-10 md:-left-12 animate-float-around transition-transform duration-500 hover-expand-3 z-20"
                    style="animation-delay: 3s;">
                    <div class="glass-blue p-2 md:p-3 rounded-full"><i data-lucide="star"
                            class="w-6 h-6 md:w-8 md:h-8 text-yellow-400 fill-yellow-400"></i></div>
                </div>
                <div class="absolute -bottom-8 -right-6 md:-bottom-12 md:-right-10 animate-float-around transition-transform duration-500 hover-expand-4 z-20"
                    style="animation-delay: 4.5s;">
                    <div class="glass-blue p-2 md:p-3 rounded-full"><i data-lucide="bell"
                            class="w-6 h-6 md:w-8 md:h-8 text-amber-500 fill-amber-100"></i></div>
                </div>

                <!-- THE GIFT BOX -->
                <div id="gift-box-visual"
                    class="relative bg-white/80 backdrop-blur-xl p-8 md:p-12 rounded-[2rem] md:rounded-[3rem] shadow-[0_0_60px_rgba(21,112,239,0.3)] transform transition-all duration-300 border-4 border-white group-hover:scale-105 gift-glow">
                    <div id="click-hint"
                        class="absolute -top-4 -right-4 md:-top-6 md:-right-12 bg-gradient-to-r from-red-500 to-pink-500 text-white font-bold text-sm md:text-base px-4 py-2 md:px-5 md:py-2 rounded-xl rotate-6 shadow-lg animate-wiggle z-20 border-2 border-white whitespace-nowrap transition-transform group-hover:rotate-12 group-hover:scale-110">
                        M·ªü qu√† ngay n√®! üëá
                    </div>
                    <div class="gift-shiver">
                        <i data-lucide="gift"
                            class="w-24 h-24 md:w-32 md:h-32 text-brand fill-sky-100 drop-shadow-2xl"></i>
                    </div>
                </div>
            </div>

            <!-- Title Area -->
            <div id="title-area" class="space-y-2 md:space-y-4 relative transition-opacity duration-500 px-2">
                <h1 class="text-5xl md:text-7xl lg:text-9xl text-slate-800 mb-4 drop-shadow-sm relative inline-block">
                    <span class="relative z-10">Merry</span>
                    <span
                        class="text-transparent bg-clip-text bg-gradient-to-r from-red-500 to-pink-600 relative z-10">Christmas</span>
                    <i data-lucide="star"
                        class="absolute -top-4 -right-6 md:-top-6 md:-right-10 text-yellow-400 w-10 h-10 md:w-16 md:h-16 fill-yellow-200 animate-spin-slow"></i>
                </h1>
                <div>
                    <div
                        class="inline-block bg-white/60 backdrop-blur-md px-6 py-2 md:px-10 md:py-3 rounded-full border border-white shadow-lg w-full md:w-auto">
                        <p class="text-xl md:text-2xl lg:text-4xl font-bold text-slate-700 whitespace-nowrap">
                            G·ª≠i <span class="text-brand font-hand font-bold text-3xl md:text-5xl">Ng·ªçc B√© B·ªèng</span> ‚ù§Ô∏è
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ===================== VIEW 2: MAIN APP ===================== -->
    <div id="main-app" class="hidden min-h-screen relative z-10 opacity-0 transition-opacity duration-1000">

        <!-- TOP DECORATIONS (Hanging Ornaments) -->
        <div class="absolute top-0 w-full h-0 z-20 flex justify-between px-4 md:px-10 pointer-events-none">
            <div class="relative animate-swing origin-top">
                <div class="w-0.5 h-20 md:h-32 bg-slate-300 mx-auto"></div>
                <div
                    class="w-12 h-12 md:w-16 md:h-16 bg-red-500 rounded-full shadow-lg border-4 border-white flex items-center justify-center relative z-10">
                    <i data-lucide="snowflake" class="text-white w-6 h-6 md:w-8 md:h-8"></i>
                </div>
            </div>
            <div class="relative animate-swing origin-top" style="animation-delay: 1s;">
                <div class="w-0.5 h-32 md:h-48 bg-slate-300 mx-auto"></div>
                <div
                    class="w-16 h-16 md:w-20 md:h-20 bg-brand rounded-full shadow-lg border-4 border-white flex items-center justify-center relative z-10">
                    <i data-lucide="star" class="text-white w-8 h-8 md:w-10 md:h-10 fill-white"></i>
                </div>
            </div>
            <!-- Hidden on small mobile -->
            <div class="relative animate-swing origin-top hidden md:block" style="animation-delay: 0.5s;">
                <div class="w-0.5 h-24 bg-slate-300 mx-auto"></div>
                <div
                    class="w-14 h-14 bg-green-500 rounded-full shadow-lg border-4 border-white flex items-center justify-center relative z-10">
                    <i data-lucide="tree-pine" class="text-white w-6 h-6"></i>
                </div>
            </div>
            <div class="relative animate-swing origin-top" style="animation-delay: 1.5s;">
                <div class="w-0.5 h-24 md:h-40 bg-slate-300 mx-auto"></div>
                <div
                    class="w-12 h-12 md:w-16 md:h-16 bg-yellow-400 rounded-full shadow-lg border-4 border-white flex items-center justify-center relative z-10">
                    <i data-lucide="bell" class="text-white w-6 h-6 md:w-8 md:h-8 fill-white"></i>
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <nav
            class="fixed top-0 w-full z-50 px-4 py-3 md:px-6 md:py-4 flex justify-between items-center transition-all duration-300 pointer-events-none">
            <div
                class="pointer-events-auto bg-white/90 backdrop-blur px-4 py-2 md:px-5 rounded-full text-slate-700 font-bold flex items-center gap-2 shadow-lg border border-white transform hover:scale-105 transition-transform cursor-default">
                <i data-lucide="gift" class="w-4 h-4 md:w-5 md:h-5 text-brand animate-wiggle"></i>
                <span class="text-brand font-hand text-lg md:text-2xl text-slate-700">Ng·ªçc <span
                        class="hidden md:inline">B√© B·ªèng</span><span class="text-red-500">‚ù§Ô∏è</span></span>
            </div>
            <button id="music-toggle"
                class="pointer-events-auto w-10 h-10 md:w-12 md:h-12 rounded-full flex items-center justify-center shadow-lg transition-all transform hover:scale-110 bg-white text-brand border border-white hover:bg-brand hover:text-white">
                <i data-lucide="play" class="w-4 h-4 md:w-5 md:h-5 ml-1 fill-current"></i>
            </button>
        </nav>

        <main class="container mx-auto px-4 pt-32 md:pt-40 pb-20 space-y-24 md:space-y-32 relative z-10">

            <!-- HERO BANNER -->
            <section class="text-center relative reveal active">
                <div class="inline-block relative z-10">
                    <!-- Responsive Huge Text -->
                    <h1
                        class="text-7xl md:text-[10rem] lg:text-[13rem] leading-none text-white drop-shadow-[0_10px_0_rgba(21,112,239,0.2)] font-hand transform -rotate-2 hover:rotate-0 transition-transform duration-500">
                        Noel
                    </h1>
                    <div class="absolute -top-2 -right-4 md:-top-4 md:-right-12 animate-float">
                        <div class="bg-white p-1 md:p-2 rounded-full shadow-md"><span
                                class="text-4xl md:text-6xl">üéÖ</span></div>
                    </div>
                    <div class="absolute bottom-0 -left-4 md:-left-12 animate-float" style="animation-delay: 1.5s;">
                        <div class="bg-white p-1 md:p-2 rounded-full shadow-md"><span
                                class="text-4xl md:text-6xl">üéÑ</span></div>
                    </div>
                </div>

                <div class="mt-8 md:mt-12 max-w-3xl mx-auto relative">
                    <div
                        class="glass-blue p-6 md:p-10 rounded-[2rem] md:rounded-[3rem] transform rotate-1 hover:rotate-0 transition-transform duration-500 relative overflow-hidden border-b-8 border-brand">
                        <div class="absolute -right-10 -top-10 w-32 h-32 bg-[#1570EF] rounded-full opacity-10 blur-2xl">
                        </div>
                        <div class="absolute left-5 top-5 opacity-20"><i data-lucide="quote"
                                class="w-10 h-10 md:w-16 md:h-16 text-brand"></i></div>
                        <p
                            class="text-lg md:text-2xl lg:text-3xl text-slate-700 font-semibold leading-relaxed relative z-10">
                            "Gi√°ng sinh c√≥ tr√†, c√≥ b√°nh, v√† c√≥... <span
                                class="text-brand font-bold underline decoration-wavy">anh</span> n·ªØa n√®! Ch√∫c em m·ªôt
                            m√πa ƒë√¥ng kh√¥ng l·∫°nh v√† c∆∞·ªùi th·∫≠t xinh nh√©!" üòò
                        </p>
                        <div class="absolute bottom-5 right-5 flex gap-1 opacity-50">
                            <i data-lucide="snowflake" class="w-5 h-5 text-brand"></i>
                            <i data-lucide="snowflake" class="w-4 h-4 text-brand"></i>
                        </div>
                    </div>
                </div>
            </section>

            <!-- DIVIDER -->
            <div class="flex items-center justify-center gap-4 opacity-60 reveal">
                <div class="h-1 w-16 md:w-24 bg-gradient-to-r from-transparent to-brand rounded-full"></div>
                <div class="bg-white p-2 md:p-3 rounded-full shadow-sm border border-blue-100">
                    <i data-lucide="camera" class="w-5 h-5 md:w-6 md:h-6 text-red-500"></i>
                </div>
                <div class="h-1 w-16 md:w-24 bg-gradient-to-l from-transparent to-brand rounded-full"></div>
            </div>

            <!-- GALLERY SECTION -->
            <section class="max-w-7xl mx-auto relative reveal">
                <div class="text-center mb-10 md:mb-16 relative">
                    <div class="absolute -left-4 top-0 animate-float hidden md:block">
                        <span class="text-6xl">‚õÑ</span>
                    </div>
                    <h2 class="text-4xl md:text-5xl text-slate-800 font-hand font-bold drop-shadow-sm mb-4">Ng·∫°i qu√° üòÖ
                    </h2>
                    <p class="text-slate-500 text-base md:text-lg">Nh·ªØng kho·∫£nh kh·∫Øc d·ªÖ th∆∞∆°ng</p>
                </div>

                <!-- Responsive Grid: 1 col mobile, 2 col tablet, 4 col desktop -->
                <div id="gallery-grid"
                    class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 md:gap-8 px-2 md:px-4">
                    <!-- Content generated by JS -->
                </div>
            </section>

            <!-- LETTER BUTTON -->
            <section class="flex flex-col items-center justify-center py-10 relative reveal">
                <div class="absolute w-full md:w-[600px] h-[600px] bg-white/40 rounded-full blur-3xl z-0"></div>
                <div class="text-center mb-12 relative z-10">
                    <h2 class="text-4xl md:text-5xl text-slate-800 font-hand font-bold mb-4">M·ªôt b√≠ m·∫≠t nh·ªè... ü§´</h2>
                    <div
                        class="inline-block bg-brand text-white font-bold px-8 py-3 rounded-full animate-bounce shadow-lg shadow-blue-500/30 border-2 border-white">
                        B·∫•m v√†o phong th∆∞ n√®!
                    </div>
                </div>
                <button id="open-letter-btn"
                    class="group relative w-full max-w-xs md:max-w-md aspect-[1.6] bg-white rounded-3xl shadow-[0_20px_50px_-10px_rgba(21,112,239,0.2)] flex items-center justify-center cursor-pointer overflow-hidden perspective-1000 transition-transform hover:scale-105 active:scale-95 duration-300 border-4 border-white ring-1 ring-slate-200">
                    <div
                        class="absolute inset-0 opacity-10 bg-[radial-gradient(#1570EF_1px,transparent_1px)] [background-size:16px_16px]">
                    </div>
                    <div
                        class="absolute top-0 left-0 w-full h-1/2 bg-sky-50 origin-top transform group-hover:rotate-x-180 transition-transform duration-700 z-20 rounded-b-[3rem] shadow-md border-b border-sky-100">
                    </div>
                    <div
                        class="absolute top-1/3 w-3/4 h-3/4 bg-white rounded-t-2xl shadow-inner transform translate-y-full group-hover:translate-y-1/4 transition-transform duration-700 z-10 flex items-start justify-center pt-6 border border-gray-100">
                        <div class="w-16 h-1 bg-red-400 rounded-full"></div>
                        <div class="absolute top-8 w-12 h-1 bg-gray-200 rounded-full"></div>
                    </div>
                    <div class="absolute bottom-4 right-4 opacity-50 transform rotate-12">
                        <i data-lucide="stamp" class="w-12 h-12 text-red-300"></i>
                    </div>
                    <div
                        class="absolute bottom-4 left-4 bg-yellow-100 text-yellow-600 px-2 py-1 text-xs font-bold rounded transform -rotate-6">
                        PRIORITY</div>
                    <div class="relative z-30 group-hover:opacity-0 transition-opacity duration-300">
                        <div
                            class="bg-brand p-6 rounded-full shadow-xl ring-4 ring-blue-100 animate-wiggle border-4 border-white">
                            <i data-lucide="heart" class="text-white w-10 h-10 fill-white"></i>
                        </div>
                    </div>
                </button>
                <div class="flex gap-8 mt-10 opacity-80">
                    <div class="animate-float"><span class="text-4xl">üéÅ</span></div>
                    <div class="animate-float" style="animation-delay: 1s;"><span class="text-4xl">üç¨</span></div>
                    <div class="animate-float" style="animation-delay: 2s;"><span class="text-4xl">üéÑ</span></div>
                </div>
            </section>

            <!-- AI WISHES -->
            <section class="max-w-4xl mx-auto relative py-10 reveal">
                <div class="flex items-center justify-center gap-4 opacity-60 mb-10">
                    <div class="h-1 w-16 md:w-24 bg-gradient-to-r from-transparent to-brand rounded-full"></div>
                    <div class="bg-white p-2 md:p-3 rounded-full shadow-sm border border-blue-100">
                        <i data-lucide="sparkles" class="w-5 h-5 md:w-6 md:h-6 text-yellow-500"></i>
                    </div>
                    <div class="h-1 w-16 md:w-24 bg-gradient-to-l from-transparent to-brand rounded-full"></div>
                </div>
                <div class="text-center mb-12">
                    <h2 class="text-4xl md:text-5xl font-hand font-bold text-slate-800 mb-4">G√≥c Ph√©p Thu·∫≠t AI ‚ú®</h2>
                    <p class="text-slate-500 text-base md:text-lg">ƒê·ªÉ tr√≠ tu·ªá nh√¢n t·∫°o n√≥i h·ªô l√≤ng anh nh√©!</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8 px-2 md:px-4">
                    <!-- WISH CARD -->
                    <div
                        class="glass-blue p-6 md:p-8 rounded-3xl relative overflow-hidden group hover:-translate-y-2 transition-transform duration-300">
                        <div
                            class="absolute -right-10 -top-10 w-32 h-32 bg-yellow-200 rounded-full blur-3xl opacity-40 group-hover:opacity-60 transition-opacity">
                        </div>
                        <h3 class="text-xl md:text-2xl font-bold text-brand mb-6 flex items-center gap-3">
                            <div class="p-2 bg-blue-100 rounded-lg"><i data-lucide="message-circle-heart"
                                    class="w-5 h-5 md:w-6 md:h-6 text-brand"></i></div>
                            L·ªùi Ch√∫c B·∫•t Ng·ªù
                        </h3>
                        <div id="ai-wish-result"
                            class="min-h-[120px] flex items-center justify-center text-center text-slate-600 italic mb-6 text-base md:text-lg bg-white/50 rounded-xl p-4 border border-white/50">
                            "Ch·ªçn m·ªôt ki·ªÉu l·ªùi ch√∫c b√™n d∆∞·ªõi nha..."
                        </div>
                        <div class="flex gap-3 justify-center">
                            <!-- Buttons are stacked on very small screens, side by side on normal mobile+ -->
                            <button onclick="generateWish('sweet')"
                                class="w-full bg-white hover:bg-red-500 hover:text-white text-slate-600 py-3 rounded-xl font-bold transition-all shadow-sm border-2 border-blue-50 flex items-center justify-center gap-2 group/btn active:scale-95">
                                <span class="group-hover/btn:animate-beat">ü•∞</span> Ng·ªçt ng√†o
                            </button>
                        </div>
                    </div>
                    <!-- POEM CARD -->
                    <div
                        class="glass-blue p-6 md:p-8 rounded-3xl relative overflow-hidden group hover:-translate-y-2 transition-transform duration-300">
                        <div
                            class="absolute -right-10 -top-10 w-32 h-32 bg-red-200 rounded-full blur-3xl opacity-40 group-hover:opacity-60 transition-opacity">
                        </div>
                        <h3 class="text-xl md:text-2xl font-bold text-red-500 mb-6 flex items-center gap-3">
                            <div class="p-2 bg-red-100 rounded-lg"><i data-lucide="feather"
                                    class="w-5 h-5 md:w-6 md:h-6 text-red-500"></i></div>
                            Nh√† Th∆° L√£ng M·∫°n
                        </h3>
                        <div id="ai-poem-result"
                            class="min-h-[120px] flex items-center justify-center text-center text-slate-600 italic mb-6 text-base md:text-lg whitespace-pre-line bg-white/50 rounded-xl p-4 border border-white/50 font-hand leading-relaxed">
                            "Anh v·ªën kh√¥ng hay l√†m th∆°...
                            Nh∆∞ng v√¨ em, anh s·∫Ω th·ª≠!"
                        </div>
                        <button id="btn-poem" onclick="generatePoem()"
                            class="w-full bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white py-3 rounded-xl font-bold transition-all shadow-md flex justify-center items-center gap-2 relative overflow-hidden active:scale-95">
                            <div
                                class="absolute inset-0 bg-white/20 translate-y-full hover:translate-y-0 transition-transform duration-300">
                            </div>
                            <i data-lucide="sparkles" class="w-5 h-5"></i> S√°ng t√°c th∆° t·∫∑ng B√©
                        </button>
                    </div>
                </div>
            </section>

            <div class="w-full flex justify-center opacity-40">
                <div class="w-3/4 h-px bg-gradient-to-r from-transparent via-slate-400 to-transparent"></div>
            </div>


        </main>

        <footer
            class="py-10 text-center text-slate-500 font-semibold relative z-10 border-t border-white/20 bg-white/30 backdrop-blur-sm">
            <p class="flex items-center justify-center gap-2">
                Made with <i data-lucide="heart" class="fill-red-500 text-red-500 w-4 h-4 animate-beat"></i> by B·∫£o
            </p>
        </footer>
    </div>

    <!-- ===================== VIEW 3: MAGICAL LETTER MODAL ===================== -->
    <div id="letter-modal"
        class="fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm hidden opacity-0 transition-opacity duration-500">
        <div id="confetti-container" class="absolute inset-0 pointer-events-none z-[70] overflow-hidden"></div>

        <div class="relative w-full max-w-lg md:max-w-xl perspective-1000">
            <div id="envelope-card"
                class="relative w-full bg-white rounded-3xl shadow-2xl overflow-hidden transform-gpu border-8 border-white ring-4 ring-red-100">
                <div class="h-4 stripes"></div>
                <div class="p-6 md:p-12 relative bg-[#fffcf5] max-h-[80vh] overflow-y-auto">
                    <button id="close-letter-btn"
                        class="absolute top-4 right-4 bg-gray-100 p-2 rounded-full text-slate-400 hover:bg-red-500 hover:text-white transition-colors z-20">
                        <i data-lucide="x" class="w-5 h-5"></i>
                    </button>
                    <div
                        class="absolute top-0 left-0 w-full h-full opacity-40 bg-[url('https://www.transparenttextures.com/patterns/notebook.png')] pointer-events-none">
                    </div>
                    <div class="text-center mb-8 opacity-0" id="letter-header">
                        <div
                            class="inline-block bg-red-100 text-red-600 px-3 py-1 rounded-full text-xs font-bold tracking-widest mb-2 uppercase border border-red-200">
                            To: My Crush</div>
                        <h3
                            class="text-3xl md:text-4xl font-hand text-slate-800 font-bold transform -rotate-2 text-brand">
                            Ng·ªçc B√© B·ªèng üå∏</h3>
                    </div>
                    <div id="letter-content-container"
                        class="leading-loose text-base md:text-lg text-slate-700 relative z-10 space-y-4 font-medium min-h-[200px]">
                    </div>
                    <div class="mt-10 text-right opacity-0" id="letter-signature">
                        <span class="font-hand text-2xl md:text-3xl font-bold text-red-500 block transform -rotate-3">-
                            B·∫£o -</span>
                    </div>
                    <div class="absolute bottom-4 left-6 opacity-20 transform rotate-12 pointer-events-none">
                        <i data-lucide="stamp" class="w-24 h-24 text-brand"></i>
                    </div>
                    <div class="absolute top-20 right-6 opacity-20 transform -rotate-12 pointer-events-none">
                        <i data-lucide="tree-pine" class="w-16 h-16 text-green-600"></i>
                    </div>
                </div>
                <div class="h-4 stripes"></div>
            </div>
        </div>
    </div>

    <!-- SCRIPT -->
    <script>
        const apiKey = "AIzaSyCWG5ALic7UUI1cmdEIAWksmZEqGJK6UX0";

        // --- PRELOADER LOGIC ---
        window.addEventListener('load', () => {
            setTimeout(() => {
                const preloader = document.getElementById('preloader');
                preloader.style.opacity = '0';
                setTimeout(() => {
                    preloader.style.display = 'none';
                }, 500);
            }, 1500); // Show preloader for at least 1.5s
        });

        // --- SCROLL REVEAL LOGIC ---
        const observerOptions = {
            threshold: 0.1
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('active');
                }
            });
        }, observerOptions);

        // --- DATA ---
        const CONFIG = {
            memories: [
                {
                    id: 1,
                    caption: "C∆∞·ªùi xinh x·ªâu!",
                    date: "Love this smile",
                    image: "https://i.postimg.cc/SxZ2MbSn/z7255768612193-031c838934b27249caa0db2b6cb4ef9f.jpg",
                    rotate: "-rotate-2"
                },
                {
                    id: 2,
                    caption: "ü•∞ Ng·ªçc ƒë√°ng iu l·∫Øm! üòâ",
                    date: "Adorable",
                    iconColor: "text-amber-500",
                    bgColor: "bg-amber-50",
                    rotate: "rotate-3",
                    icon: "ü•∞"
                },
                {
                    id: 3,
                    caption: "Ng·∫°i qu√° üòÖ",
                    date: "K√¨ qu√° √† nha",
                    image: "https://i.postimg.cc/MGSPRfzz/z7255768608016-e861b965a0e2199d23cd32506e9d37cc.jpg",
                    rotate: "-rotate-1"
                },
                {
                    id: 4,
                    caption: "Iu ƒë·ªùi nh√¨u l√™n em nh√©!",
                    date: "Ng·ªçc y√™u ƒë·ªùi",
                    iconColor: "text-purple-500",
                    bgColor: "bg-purple-50",
                    rotate: "rotate-2",
                    icon: "‚ò∫Ô∏è"
                },
            ],
            letterLines: [
                "Ch√†o Ng·ªçc b√© b·ªèng,",
                "Noel nƒÉm nay l·∫°nh h∆°n m·ªçi nƒÉm nh·ªâ? Nh∆∞ng m√† th·∫•y em vui v·∫ª, y√™u ƒë·ªùi l√† anh c·∫£m th·∫•y ·∫•m √°p l·∫° th∆∞·ªùng.",
                "Anh kh√¥ng gi·ªèi n√≥i l·ªùi hoa m·ªπ, nh∆∞ng anh mu·ªën em bi·∫øt r·∫±ng em l√† m·ªôt c√¥ g√°i c·ª±c k·ª≥ ƒë·∫∑c bi·ªát v·ªõi anh.",
                "Hy v·ªçng m√≥n qu√† nh·ªè n√†y l√†m em vui. Ch√∫c em m·ªôt m√πa Gi√°ng sinh an l√†nh v√† y√™u ƒë·ªùi em nh√©.",
                "P/s: Anh r·∫•t vui khi ƒë√£ gi√∫p Ng·ªçc c·∫£m th·∫•y ·ªïn h∆°n v√† gi√∫p Ng·ªçc c√≥ th√™m hy v·ªçng m·ªói ng√†y, Anh nghe v·∫≠y c·∫£m th·∫•y h·∫°nh ph√∫c l·∫Øm ü•∞"
            ]
        };

        const audio = document.getElementById('bg-music');
        let isPlaying = false;

        // --- INIT ---
        lucide.createIcons();
        renderSnow();
        renderGallery();

        // Add observer to reveal elements
        document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

        // --- GEMINI AI ---
        async function callGemini(prompt) {
            if (!apiKey) {
                await new Promise(r => setTimeout(r, 1000));
                return "H·ªá th·ªëng ƒëang ch·ªù API Key, nh∆∞ng anh y√™u em l√† th·∫≠t! (Demo Mode) ‚ù§Ô∏è";
            }
            try {
                const response = await fetch(
                    `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`,
                    {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] }),
                    }
                );
                const data = await response.json();
                return data.candidates?.[0]?.content?.parts?.[0]?.text || "AI ƒëang b·∫≠n ƒëi g√≥i qu√† r·ªìi...";
            } catch (error) {
                console.error(error);
                return "M·∫°ng h∆°i y·∫øu, nh∆∞ng t√¨nh c·∫£m anh d√†nh cho em th√¨ si√™u kh·ªèe!";
            }
        }

        async function generateWish(type) {
            const resultDiv = document.getElementById('ai-wish-result');
            resultDiv.innerHTML = '<div class="animate-spin w-6 h-6 border-2 border-brand border-t-transparent rounded-full mx-auto"></div>';

            let prompt = "";
            if (type === 'funny') {
                prompt = "Vi·∫øt m·ªôt l·ªùi ch√∫c Gi√°ng sinh ng·∫Øn g·ªçn, h√†i h∆∞·ªõc, b√° ƒë·∫°o, tinh ngh·ªãch d√†nh cho b·∫°n g√°i t√™n Ng·ªçc (bi·ªát danh B√© B·ªèng). D√πng teencode m·ªôt ch√∫t, vui v·∫ª, c√≥ emoji.";
            } else {
                prompt = "Vi·∫øt m·ªôt l·ªùi ch√∫c Gi√°ng sinh ng·∫Øn g·ªçn, si√™u ng·ªçt ng√†o, l√£ng m·∫°n, ch√¢n th√†nh d√†nh cho ng∆∞·ªùi con g√°i t·ªõ th√≠ch t√™n Ng·ªçc (bi·ªát danh B√© B·ªèng) v√† em √Ω ·ªü ƒê√† n·∫µng, t·ªõ t√™n B·∫£o nh√© ·ªü H·ªì Ch√≠ Minh. C√≥ emoji.";
            }

            const text = await callGemini(prompt);
            resultDiv.innerText = text;
        }

        async function generatePoem() {
            const resultDiv = document.getElementById('ai-poem-result');
            const btn = document.getElementById('btn-poem');

            const originalBtnContent = btn.innerHTML;
            btn.innerHTML = '<div class="animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full"></div> ƒêang s√°ng t√°c...';
            btn.disabled = true;

            const prompt = "L√†m m·ªôt b√†i th∆° t√¨nh 4 c√¢u, ch·ªß ƒë·ªÅ Gi√°ng sinh v√† t√¨nh y√™u m√πa ƒë√¥ng t·∫∑ng ng∆∞·ªùi con g√°i t·ªõ th√≠ch t√™n Ng·ªçc (bi·ªát danh l√† Ng·ªçc b√© b·ªèng) v√† em √Ω ·ªü ƒê√† n·∫µng, t·ªõ th√¨ ·ªü H·ªì Ch√≠ Minh. Ng√¥n t·ª´ d·ªÖ th∆∞∆°ng, hi·ªán ƒë·∫°i, v·∫ßn ƒëi·ªáu. C√≥ emoji.";
            const text = await callGemini(prompt);

            resultDiv.innerText = text;
            btn.innerHTML = originalBtnContent;
            btn.disabled = false;
        }

        // --- EVENT LISTENERS ---
        document.addEventListener('click', (e) => createClickHeart(e.clientX, e.clientY));
        document.getElementById('start-btn').addEventListener('click', startIntro);
        document.getElementById('music-toggle').addEventListener('click', toggleMusic);
        document.getElementById('open-letter-btn').addEventListener('click', openLetter);
        document.getElementById('close-letter-btn').addEventListener('click', closeLetter);

        // Touch event for hearts on mobile
        document.addEventListener('touchstart', (e) => {
            const touch = e.touches[0];
            createClickHeart(touch.clientX, touch.clientY);
        }, { passive: true });

        function createClickHeart(x, y) {
            const heart = document.createElement('div');
            heart.className = 'click-heart';
            heart.innerHTML = '‚ù§Ô∏è';
            heart.style.left = `${x}px`;
            heart.style.top = `${y}px`;
            heart.style.fontSize = `${Math.random() * 20 + 15}px`;
            heart.style.transform = `rotate(${Math.random() * 360}deg)`;
            document.body.appendChild(heart);
            setTimeout(() => heart.remove(), 1000);
        }

        function startIntro() {
            const box = document.getElementById('gift-box-visual');
            const clickHint = document.getElementById('click-hint');
            const intro = document.getElementById('intro-screen');
            const main = document.getElementById('main-app');
            const title = document.getElementById('title-area');

            title.style.opacity = '0';
            clickHint.style.opacity = '0';
            box.classList.remove('gift-glow', 'group-hover:scale-110');

            box.classList.add('animate-shake-hard');

            setTimeout(() => {
                box.classList.remove('animate-shake-hard');
                box.classList.add('animate-zoom-explode');
                createBurstConfetti();

                setTimeout(() => {
                    intro.style.display = 'none';
                    main.classList.remove('hidden');

                    requestAnimationFrame(() => {
                        main.classList.remove('opacity-0');
                        audio.play().then(() => {
                            isPlaying = true;
                            updateMusicIcon();
                        }).catch(() => console.log("Music blocked"));
                    });
                }, 600);

            }, 800);
        }

        function toggleMusic(e) {
            e.stopPropagation();
            if (isPlaying) {
                audio.pause();
                isPlaying = false;
            } else {
                audio.play();
                isPlaying = true;
            }
            updateMusicIcon();
        }

        function updateMusicIcon() {
            const btn = document.getElementById('music-toggle');
            if (isPlaying) {
                btn.classList.add('bg-brand', 'text-white', 'border-brand', 'animate-spin-slow');
                btn.classList.remove('bg-white', 'text-brand', 'border-white');
            } else {
                btn.classList.remove('bg-brand', 'text-white', 'border-brand', 'animate-spin-slow');
                btn.classList.add('bg-white', 'text-brand', 'border-white');
            }
        }

        function openLetter(e) {
            e.stopPropagation();
            const modal = document.getElementById('letter-modal');
            const envelope = document.getElementById('envelope-card');
            const contentDiv = document.getElementById('letter-content-container');

            contentDiv.innerHTML = '';

            modal.classList.remove('hidden');
            requestAnimationFrame(() => {
                modal.classList.remove('opacity-0');
                envelope.classList.add('animate-open-envelope');

                const header = document.getElementById('letter-header');
                header.classList.remove('animate-slide-up');
                void header.offsetWidth;
                header.classList.add('animate-slide-up', 'delay-300');

                const signature = document.getElementById('letter-signature');
                signature.classList.remove('animate-slide-up');
                signature.style.opacity = '0';

                let delay = 500;
                CONFIG.letterLines.forEach((line, index) => {
                    setTimeout(() => {
                        const p = document.createElement('p');
                        p.textContent = line;
                        p.className = 'animate-slide-up';
                        if (index === CONFIG.letterLines.length - 1) {
                            p.className += ' font-bold text-brand mt-6 bg-blue-50 p-4 rounded-xl border-2 border-blue-100 transform rotate-1';
                        }
                        contentDiv.appendChild(p);
                    }, delay);
                    delay += 1200;
                });

                setTimeout(() => {
                    signature.classList.add('animate-slide-up');
                }, delay + 500);

                createConfetti();
            });
        }

        function closeLetter(e) {
            e.stopPropagation();
            const modal = document.getElementById('letter-modal');
            modal.classList.add('opacity-0');
            setTimeout(() => {
                modal.classList.add('hidden');
                const envelope = document.getElementById('envelope-card');
                envelope.classList.remove('animate-open-envelope');
                document.getElementById('letter-header').classList.remove('animate-slide-up', 'delay-300');
                document.getElementById('letter-signature').classList.remove('animate-slide-up');
                document.getElementById('confetti-container').innerHTML = '';
            }, 500);
        }

        // --- RENDERERS ---
        function renderGallery() {
            const grid = document.getElementById('gallery-grid');
            grid.innerHTML = '';
            CONFIG.memories.forEach(mem => {
                const card = document.createElement('div');
                card.className = "tilt-card group relative h-80 w-full cursor-pointer perspective-1000";

                let contentHtml = '';
                if (mem.image) {
                    contentHtml = `
                        <div class="w-full h-48 mb-4 rounded-2xl overflow-hidden border-4 border-white shadow-inner relative">
                            <img src="${mem.image}" alt="${mem.caption}" class="w-full h-full object-cover transform transition-transform duration-700 group-hover:scale-110" />
                            <div class="absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"></div>
                        </div>
                    `;
                } else {
                    contentHtml = `
                        <div class="w-28 h-28 ${mem.bgColor || 'bg-gray-100'} rounded-full mb-6 flex items-center justify-center text-6xl shadow-inner animate-float border-4 border-white mx-auto">
                            ${mem.icon}
                        </div>
                    `;
                }

                card.innerHTML = `
                    <div class="tilt-content absolute inset-0 bg-white rounded-[2rem] shadow-xl p-5 flex flex-col items-center justify-center transform transition-all duration-300 group-hover:scale-105 group-hover:z-20 border border-white ${mem.rotate} hover:rotate-0">
                        <div class="absolute -top-3 left-1/2 -translate-x-1/2 z-20">
                             <div class="w-12 h-4 bg-red-400/80 transform -rotate-2 shadow-sm rounded-sm"></div>
                        </div>
                        ${contentHtml}
                        <h3 class="font-bold text-slate-700 text-xl mb-1 font-hand">${mem.caption}</h3>
                        <p class="text-sm text-slate-400 font-bold uppercase tracking-wider">${mem.date}</p>
                        <div class="absolute bottom-4 left-1/2 -translate-x-1/2 w-16 h-3 bg-blue-200/50 transform rotate-1 opacity-50"></div>
                    </div>
                `;

                // Check for touch device
                const isTouch = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
                if (!isTouch) {
                    card.addEventListener('mousemove', handleTilt);
                    card.addEventListener('mouseleave', resetTilt);
                }
                grid.appendChild(card);
            });
        }

        function renderSnow() {
            const container = document.getElementById('snow-container');
            for (let i = 0; i < 50; i++) {
                const flake = document.createElement('div');
                flake.textContent = '‚ùÑ';
                const colorClass = Math.random() > 0.5 ? 'text-white/60' : 'text-sky-200/60';
                flake.className = `absolute top-[-20px] ${colorClass} drop-shadow-sm pointer-events-none`;
                flake.style.left = Math.random() * 100 + 'vw';
                flake.style.fontSize = (Math.random() * 15 + 10) + 'px';
                flake.style.animation = `fall ${Math.random() * 5 + 5}s linear infinite`;
                flake.style.animationDelay = Math.random() * 5 + 's';
                container.appendChild(flake);
            }
        }

        function handleTilt(e) {
            const card = e.currentTarget;
            const content = card.querySelector('.tilt-content');
            const rect = card.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            const centerX = rect.width / 2;
            const centerY = rect.height / 2;
            const rotateX = ((y - centerY) / centerY) * -8;
            const rotateY = ((x - centerX) / centerX) * 8;
            content.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1.05)`;
        }

        function resetTilt(e) {
            const content = e.currentTarget.querySelector('.tilt-content');
            content.style.transform = `perspective(1000px) rotateX(0) rotateY(0) scale(1)`;
        }

        function createBurstConfetti() {
            const colors = ['#ef4444', '#22c55e', '#1570EF', '#f59e0b', '#ffffff'];
            for (let i = 0; i < 100; i++) {
                const p = document.createElement('div');
                p.className = 'burst-particle';
                p.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                const angle = Math.random() * Math.PI * 2;
                const distance = 200 + Math.random() * 300;
                const tx = Math.cos(angle) * distance + 'px';
                const ty = Math.sin(angle) * distance + 'px';
                p.style.setProperty('--tx', tx);
                p.style.setProperty('--ty', ty);
                p.style.animationDelay = (Math.random() * 0.1) + 's';
                document.body.appendChild(p);
                setTimeout(() => p.remove(), 1500);
            }
        }

        function createConfetti() {
            const container = document.getElementById('confetti-container');
            const colors = ['#ef4444', '#22c55e', '#1570EF', '#f59e0b'];
            for (let i = 0; i < 50; i++) {
                const p = document.createElement('div');
                p.className = 'absolute w-3 h-3 rounded-full opacity-0';
                p.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                p.style.left = '50%';
                p.style.top = '50%';
                p.style.animation = `explode 0.8s cubic-bezier(0, 0.9, 0.57, 1) forwards`;
                const x = (Math.random() - 0.5) * 400 + 'px';
                const y = (Math.random() - 0.5) * 400 + 'px';
                p.style.setProperty('--x-move', x);
                p.style.setProperty('--y-move', y);
                p.style.animationDelay = Math.random() * 0.3 + 's';
                container.appendChild(p);
            }
        }
    </script>
</body>

</html>